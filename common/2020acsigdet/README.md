# Figures
All figures require access to the figures data and `studyparams.py`, which contains a list of all the mice and sessions associated with each experiment. Running the generate files associated with each figure requires access to the behaviour data and `good_sessions.csv` and `good_mice.csv`, which contain lists of good sessions and mice to use for data analysis.

The generate files save data in a study folder located in the FIGURES_DATA_PATH found in `jaratoolbox/settings.py`. By default, this path is usually /mnt/jarahubdata/data/figuresdata/. Make sure jarahub is mounted on your computer so you can access this data.

## Figure 1 (Behaviour summary without manipulation)
This figure is produced by running `figure_behav_performance.py`.

### Panel A
This panel has a cartoon of a mouse performing the tone detection task, created in Inkscape.
### Panel B
This panel has a cartoon of the stimuli used during the tone detection task, created in Inkscape.
### Panel C
This panel has an example psychometric curve from one session from one mouse, with the data only split by SNR. This requires the file `band068_unimplanted_psycurve.npz`, which is created by running `generate_behav_performance.py`.
### Panel D
This panel shows all psychometric curves from all mice. This requires the file `unimplanted_behaviour_v2.npz`, created by running `generate_behav_performance.py`.

## Figure 2 (Effect on behaviour of inactivating AC)
This figure is produced by running `figure_ac_inactivation.py`.

### Panel A
This panel has a cartoon of the the mouse performing the task with laser stimulation, created in Inkscape.
### Panel B,C
These panels have example psychometric curves for one mouse each, with the data pooled across all experimental sessions, split only by SNR, and pooling data from both bandwidths. This requires the files `band046_psycurve.npz` and `band134_psycurve.npz`, created by running `generate_ac_inactivation_examples.py`.
### Panel D,E,F
These panels show summaries of changes in d', hit rate, and false alarm rate with laser inactivation. This requires the file `all_behaviour_ac_inactivation_v2.npz`, generated by running `generate_ac_inactivation.py`.
### Panel G,H,I
These panels show scatter plots comparing changes in d', hit rate, and false alarm rate between the laser inside and laser outside conditions. This requires the file `all_behaviour_ac_inactivation_v2.npz`, generated by running `generate_ac_inactivation.py`.

## Figure 3 (Effect on timing of behaviour of inactivating AC)
This figure is produced by running `figure_ac_inactivation_reaction_times.py`. All data in this figure is stored in the file `all_reaction_times_ac_inactivation.npz`, generated by running `generate_ac_inactivation_reaction_times.py`.

### Panel A,B
These panels show summaries of changes in sampling time (Center-in to Center-out) and time to reward (Center-out to Side-in) with laser inactivation.
### Panel C,D
These panels show scatter plots comparing the changes in sampling time or time to reward between the laser inside and laser outside conditions.

## Figure 4 (Effect on behaviour of inactivating PV/SOM)
This figure is produced by running `figure_inhib_inactivation.py`.

### Panel A,I
These panels show cartoons of PV/SOM cells being inactivated by green laser, created in Inkscape.
### Panel B,J
These panels show example psychometric curves from one PV-ArchT and SOM-ArchT mouse, with data pooled across all experimental sessions, split by SNR, and pooling data from different bandwidths. This requires the files `band065_psycurve.npz` and `band137_psycurve.npz`, generated by running `generate_inhib_inactivation_examples.py`.
### Panel C,D,E,K,L,M
These panels show summaries of changes in d', hit rate, and false alarm rate with laser stimulation. This requires the files `all_behaviour_inhib_inactivation_v2.npz`, generated by running `generate_inhib_inactivation.py`.
### Panel F,G,H,N,O,P
These panels show scatter plots comparing the changes in d', hit rate, and false alarm rate between the laser inside and laser outside conditions. This requires the files `all_behaviour_inhib_inactivation_v2.npz`, generated by running `generate_inhib_inactivation.py`.

## Figure 5 (Effect on timing of behaviour of inactivating PV/SOM)
This figure is produced by running `figure_inhib_inactivation_reaction_times.py`. All data in this figure is stored in the file `all_reaction_times_inhib_inactivation.npz`, generated by running `generate_inhib_inactivation_reaction_times.py`.

### Panel A,C,E,G
These panels show changes in sampling time and time to reward with laser stimulation.
### Panel B,D,F,H
These panels show scatter plots comparing changes in sampling time or time to reward between the laser inside and laser outside conditions.

# Other Generate Files
These files are mostly used to generate extra data that is presented in the results, but not in figures. All generate files require access to the behaviour data and `studyparams.py`.

## `generate_sessions_to_use.py`
This file generates the files `good_sessions.csv` and `good_mice.csv`, which contain a list of sessions for each mouse where the performance was at least 60% correct, and a list of mice that had at least 3 such "good" sessions. It does this by loading every behaviour session associated with each mouse in `studyparams.py` and checking the performance by calculating the accuracy, then recording which sessions passed this criterion.

## `generate_extra_results_data.py`
This file generates results on 1) the effect of AC inactivation on hit rate by SNR, and 2) amount of time it took mice to reach various stages of behavioural shaping.

## `generate_pvarcht_ephys_database.py`
This file generates a celldatabase for cells recorded extracellularly from band075, a PV-ArchT mouse. This requires access to the behaviour and ephys data for band075, as well as its inforec. Outputs the celldatabase `band075_cells.h5`.

## `generate_pvarcht_ephys_stats.py`
This file generates results for the effect of shining green laser in an PV-ArchT mouse on sound responses in the AC. This requires the file `band075_cells.h5`, generated by `generate_pvarcht_ephys_database.py`.